<!DOCTYPE html>
<html>
<head>
    <title>Backend API Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px; }
        #results { margin-top: 20px; border: 1px solid #ccc; padding: 10px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Direct Backend API Test</h1>
    <p>Testing: <strong>http://localhost:3001/api</strong></p>
    <button onclick="testHealth()">Test Health</button>
    <button onclick="testRegister()">Test Register</button>
    <div id="results"></div>

    <script>
        const API_BASE = 'http://localhost:3001/api';

        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const p = document.createElement('p');
            p.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            p.className = type;
            results.appendChild(p);
            console.log(message);
        }

        async function testHealth() {
            log('üß™ Testing health endpoint...', 'info');
            try {
                const response = await fetch(`${API_BASE}/health`, {
                    method: 'GET',
                    mode: 'cors'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ Health SUCCESS: ' + JSON.stringify(data, null, 2), 'success');
                } else {
                    log(`‚ùå Health failed: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                log('‚ùå Health ERROR: ' + error.message, 'error');
            }
        }

        async function testRegister() {
            log('üß™ Testing registration...', 'info');
            try {
                const userData = {
                    name: 'Test User',
                    email: `test${Date.now()}@example.com`,
                    password: 'password123'
                };

                const response = await fetch(`${API_BASE}/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    mode: 'cors',
                    body: JSON.stringify(userData)
                });

                if (response.ok) {
                    const data = await response.json();
                    log('‚úÖ Register SUCCESS: ' + JSON.stringify(data, null, 2), 'success');
                } else {
                    log(`‚ùå Register failed: ${response.status}`, 'error');
                }
            } catch (error) {
                log('‚ùå Register ERROR: ' + error.message, 'error');
            }
        }

        window.onload = function() {
            log('üöÄ API Test Page Loaded', 'info');
            log('Ready to test backend endpoints...', 'info');
        };
    </script>
</body>
</html>
